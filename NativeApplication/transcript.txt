I am unable to diagnose and fix this bug.